<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Код Ицзин</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Статичный фон -->
    <img id="static-bg" src="assets/backgrounds/background-1.png" alt="Фон Ицзин">

    <div class="app-container">

        <!-- ЭКРАН 1: Главное меню -->
        <div id="main-menu" class="screen active">
            <div class="header">
                <!-- Заголовок убран, так как есть на фоне -->
            </div>
            
            <div class="menu-buttons-container">
                <button onclick="showScreen('about-screen')">О Ицзин</button>
                <button onclick="showScreen('warning-screen')">Предупреждение</button>
                <button onclick="showScreen('mode-selection-screen')">Начнём</button>
            </div>
        </div>

        <!-- ЭКРАН 2: Об Ицзин -->
        <div id="about-screen" class="screen">
            <h1>О гадании Ицзин</h1>
            <div class="text-content">
                <!-- ... существующий текст ... -->
            </div>
            <button onclick="showScreen('main-menu')">Назад</button>
        </div>

        <!-- ЭКРАН 3: Предупреждение -->
        <div id="warning-screen" class="screen">
            <h1>⚠️ Предупреждение</h1>
            <div class="text-content">
                <!-- ... существующий текст ... -->
            </div>
            <button onclick="showScreen('main-menu')">Понятно</button>
        </div>

        <!-- ЭКРАН 4: Выбор режима гадания -->
        <div id="mode-selection-screen" class="screen">
            <div class="header">
                <h1>Выберите способ гадания</h1>
            </div>
            
            <div class="mode-buttons-container">
                <div class="mode-button" onclick="selectAutoMode()">
                    <div class="mode-title">Бросить монеты</div>
                    <div class="mode-subtitle">(Алгоритмом)</div>
                    <div class="mode-description">Монеты будут брошены программными установками</div>
                </div>
                
                <div class="mode-button" onclick="selectManualMode()">
                    <div class="mode-title">Бросить монеты</div>
                    <div class="mode-subtitle">(Вручную)</div>
                    <div class="mode-description">Вы бросаете монеты сами</div>
                </div>
            </div>

            <button onclick="showScreen('main-menu')" class="back-button">
                Назад
            </button>
        </div>

        <!-- ЭКРАН 5: Процесс гадания (АВТОМАТИЧЕСКИЙ РЕЖИМ) -->
        <div id="divination-screen" class="screen">
            <h2>Задайте свой вопрос мысленно</h2>

            <!-- Контейнер для монет -->
            <div class="coins-container">
                <img id="coin1" class="coin" src="assets/coins/ruble-heads.png" alt="Монета">
                <img id="coin2" class="coin" src="assets/coins/dollar-heads.png" alt="Монета">
                <img id="coin3" class="coin" src="assets/coins/yuan-heads.png" alt="Монета">
            </div>

            <!-- Единая кнопка для всего процесса -->
            <button id="action-button" onclick="handleAction()">Бросить монеты (6 из 6)</button>

            <!-- ФИКСИРОВАННОЕ окно для гексаграммы -->
            <div class="hexagram-fixed-container">
                <div id="hexagram-lines">
                    <p>Бросьте монеты 6 раз чтобы построить гексаграмму</p>
                </div>
            </div>

            <!-- Кнопка Назад в меню - ВНИЗУ -->
            <button class="bottom-button" onclick="showScreen('mode-selection-screen')">Назад</button>
        </div>

        <!-- ЭКРАН 6: Гексаграмма (АВТОМАТИЧЕСКИЙ РЕЖИМ) -->
        <div id="result-screen" class="screen">
            <h1>Ваша гексаграмма</h1>
            <div id="final-hexagram"></div>
        </div>

        <!-- ЭКРАН 7: Толкование (АВТОМАТИЧЕСКИЙ РЕЖИМ) -->
        <div id="interpretation-screen" class="screen">
            <div class="meaning-overlay-container">
                <!-- ФОН-РАМКА -->
                <img src="assets/meanings/meaning-1.png" class="meaning-background-image">
                
                <!-- ТЕКСТОВАЯ ПОДЛОЖКА -->
                <div class="text-overlay-test">
                    <div class="text-content-test">
                        <h3 id="hexagram-name">Название гексаграммы</h3>
                        <div id="hexagram-description" class="test-text">
                            <!-- Текст будет загружен из JSON -->
                        </div>
                    </div>
                </div>
                
                <!-- Кнопка и заголовок -->
                <div class="meaning-content-overlay">
                    <h1>Толкование гексаграммы</h1>
                    <button onclick="showScreen('main-menu')">В главное меню</button>
                </div>
            </div>
        </div>

        <!-- ЭКРАН 8: Ручной ввод гексаграммы -->
        <div id="manual-input-screen" class="screen">
            <h2>Ручной ввод гексаграммы</h2>
            
            <div class="manual-instructions">
                <p>Бросьте 3 монеты 6 раз и введите результаты:</p>
                <p><strong>2-3 орла = Ян (⚊)</strong><br>
                   <strong>0-1 орёл = Инь (⚋)</strong></p>
            </div>

            <div class="manual-lines-container">
                <!-- Линии будут добавляться здесь -->
            </div>

            <div class="manual-buttons">
                <button onclick="addManualLine('yang')">Добавить Ян (⚊)</button>
                <button onclick="addManualLine('yin')">Добавить Инь (⚋)</button>
                <button onclick="clearManualLines()">Очистить</button>
            </div>

            <div class="manual-action-buttons">
                <button id="show-result-btn" onclick="showManualResult()" disabled>Показать результат</button>
                <button onclick="showScreen('mode-selection-screen')">Назад к выбору режима</button>
            </div>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>
